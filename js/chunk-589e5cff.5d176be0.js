(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-589e5cff","chunk-8f8fadf8"],{2804:function(e,t,r){},b1d4c:function(e,t,r){"use strict";r.r(t);var n=(r("8e6e"),r("456d"),r("96cf"),r("3b8d")),a=(r("7f7f"),r("ac6a"),r("bd86")),o=r("2f62"),i=r("d4c2");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=Object(o.a)("auth").mapState,u={name:"PermissionTable",components:{PermissionAdd:i.default},data:function(){return{columns:[{title:"グループ",width:150,slot:"group"},{title:"承認者氏名",width:300,align:"center",slot:"name"},{title:"権限",children:[{title:"就業承認",slot:"workConfirm",align:"center"},{title:"月次承認",slot:"monthConfirm",align:"center"},{title:"超過勤務命令",slot:"overWorkConfirm",align:"center"},{title:"予定作成",slot:"scheduleCreate",align:"center"},{title:"権限付与",slot:"permissionGive",align:"center"},{title:"休暇・休業承認",slot:"restConfirm",align:"center"},{title:"決裁レベル",key:"level",align:"center"}]},{title:"有効期間",align:"center",width:250,key:"validPeriod"}],data:[],forRest1:!1,tableData:[],mergeSpanInfo:[],choosedLeaf:[]}},created:function(){this.getTableData()},computed:s({},l(["treeMenu"]),{treeData:function(){return this.treeMenu}}),watch:{data:{handler:function(){var e=[];this.mergeSpanInfo=this.data.map((function(t,r){var n=0,a=[];return t.memberList?t.memberList.forEach((function(o,i){o.validList?(n+=o.validList.length,o.validList.length>1&&a.push([i,o.validList.length]),o.validList.forEach((function(n){e=e.concat(s({preIndex:r,group:t.group,name:o.name},n))}))):(n+=1,e=e.concat({preIndex:r,group:t.group,name:o.name}))})):e=e.concat({group:t.group}),n>1?{deptOccupy:n,whichMemberDuplicate:a}:{deptOccupy:1}})),this.tableData=e},immediate:!0}},methods:{handleBtn:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getTableData:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.api.mock("permissionTableData");case 4:t=e.sent,r=t.data,this.data=r,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return");case 12:return e.prev=12,this.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[1,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),handleSpan:function(e){var t=e.rowIndex,r=e.columnIndex,n=[],a=0;return this.mergeSpanInfo.forEach((function(e){if(e.whichMemberDuplicate){for(var o=0;o<e.deptOccupy;o++)0===o?t===o+a&&0===r&&(n=[e.deptOccupy,1]):t===o+a&&0===r&&(n=[0,0]);var i=a;e.whichMemberDuplicate.forEach((function(e){for(var a=0;a<e[1];a++)0===a?t===a+i&&1===r&&(n=[e[1],1]):t===a+i&&1===r&&(n=[0,0]);i+=e[1]})),a+=e.deptOccupy}else a+=1})),n}}},f=r("2877"),d=Object(f.a)(u,(function(){var e=this,t=this,r=t.$createElement,n=t._self._c||r;return n("div",[n("Table",{attrs:{border:"",columns:t.columns,data:t.tableData,"span-method":t.handleSpan,loading:t.loading},scopedSlots:t._u([{key:"group",fn:function(e){var r=e.row;return[n("Button",{class:0!==r.preIndex?"ml30 width75":"width75",attrs:{type:"primary",ghost:"",size:"small"}},[t._v("\n        "+t._s(r.group)+"\n      ")])]}},{key:"name",fn:function(e){var r=e.row;return[r.name?n("Button",{attrs:{type:"primary",ghost:"",size:"small",long:""}},[t._v("\n        "+t._s(r.name)+"\n      ")]):n("SPAN",{staticClass:"grey"},[t._v("未设定")])]}},{key:"workConfirm",fn:function(e){var r=e.row;return[n("span",{staticClass:"blue"},[t._v(t._s(r.workConfirm?"〇":""))])]}},{key:"monthConfirm",fn:function(e){var r=e.row;return[n("span",{staticClass:"blue"},[t._v(t._s(r.monthConfirm?"〇":""))])]}},{key:"overWorkConfirm",fn:function(e){var r=e.row;return[n("span",{staticClass:"blue"},[t._v(t._s(r.overWorkConfirm?"〇":""))])]}},{key:"scheduleCreate",fn:function(e){var r=e.row;return[n("span",{staticClass:"blue"},[t._v(t._s(r.scheduleCreate?"〇":""))])]}},{key:"permissionGive",fn:function(e){var r=e.row;return[n("span",{staticClass:"blue"},[t._v(t._s(r.permissionGive?"〇":""))])]}},{key:"restConfirm",fn:function(e){var r=e.row;return[n("span",{staticClass:"blue"},[t._v(t._s(r.restConfirm?"〇":""))])]}}])}),!0===t.forRest1?n("PermissionAdd",{key:"forRest-1",ref:"updateData",on:{update:function(t){return e.$emit("update",t)}}}):n("PermissionAdd",{key:"forRest-2",ref:"updateData",on:{update:function(t){return e.$emit("update",t)}}})],1)}),[],!1,null,"379bbc78",null);t.default=d.exports},bbe5:function(e,t,r){"use strict";var n=r("2804");r.n(n).a},d4c2:function(e,t,r){"use strict";r.r(t);var n=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),a=r("2f62");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var i=Object(a.a)("auth").mapState,c={name:"PermissionAdd",props:{isAdd:{type:Boolean,default:!1}},data:function(){return{localValue:{name:"",remark:"",menuIdList:[]},ruleValidate:{name:[{required:!0,message:"入力してください",trigger:"blur"}],remark:[{validator:function(e,t,r){return t?t.length<10?r(new Error("10文字以上に入力してください。")):void r():r()},trigger:"blur"}]},isShow:!1,treeData:[]}},watch:{isShow:function(e){if(e){if(this.treeData.length)return;this.treeData=this.utils.deepClone(this.treeMenu)}}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i(["treeMenu"])),methods:{cancel:function(){this.$refs.localValue.resetFields(),this.isShow=!1},add:function(){var e=this;this.$refs.localValue.validate((function(t){if(t){var r=e.$refs.tree.getCheckedNodes();e.localValue.menuIdList=r.map((function(e){return e.value})),e.$emit("add"),e.isShow=!1}}))},update:function(){var e=this;this.$refs.localValue.validate((function(t){if(t){var r=e.$refs.tree.getCheckedNodes();e.localValue.menuIdList=r.map((function(e){return e.value})),e.$emit("update",e.localValue),e.isShow=!1}}))}}},s=(r("bbe5"),r("2877")),l=Object(s.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[!0===e.isAdd?r("Button",{attrs:{type:"primary",size:"large",icon:"md-add-circle"},on:{click:function(t){e.isShow=!0}}},[e._v("追加")]):e._e(),r("Modal",{attrs:{title:e.isAdd?"権限追加":"権限訂正","footer-hide":"","mask-closable":!1,draggable:""},on:{"on-cancel":e.cancel},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[r("Form",{ref:"localValue",attrs:{"label-width":120,model:e.localValue,rules:e.ruleValidate}},[r("FormItem",{attrs:{label:"権限名称",prop:"name"}},[r("Input",{attrs:{placeholder:"権限名称",maxlength:15},model:{value:e.localValue.name,callback:function(t){e.$set(e.localValue,"name",t)},expression:"localValue.name"}})],1),r("FormItem",{attrs:{label:"備考",prop:"remark"}},[r("Input",{attrs:{placeholder:"備考",maxlength:100},model:{value:e.localValue.remark,callback:function(t){e.$set(e.localValue,"remark",t)},expression:"localValue.remark"}})],1),r("div",{staticClass:"label"},[e._v("詳細")]),r("Tree",{ref:"tree",staticClass:"tree",attrs:{data:e.treeData,"show-checkbox":""}})],1),r("div",{staticClass:"my-footer"},[r("Button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("キャンセル")]),!1===e.isAdd?r("Button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("更新")]):r("Button",{attrs:{type:"success",size:"large"},on:{click:function(t){return e.add()}}},[e._v("登録")])],1)],1)],1)}),[],!1,null,"2a58edbd",null);t.default=l.exports}}]);